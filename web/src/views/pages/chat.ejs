<!DOCTYPE html>
<html lang="en">
<head>
  <title>Berlioz Chat</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
  <link rel="stylesheet" href="/css/chat.css">
  <link rel="stylesheet" href="/css/header.css">
  <script defer src="/scripts/chat.js"></script>
</head>
<header>
    <% include ../partials/header %>
</header>
<body data-meid="<%= myid %>">
  <div id="chatWrapper">
    <section id="up">
          <button class="update bRadius50" title="update">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          </button>
          <span id="errorMessage">Error occured</span>
          <a id="exit" href="/logout" title="log out">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path d="M0 0h24v24H0z" fill="none"/>
              <path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
            </svg>
          </a>
    </section>
    <section id="chat">
      <div id="messagesWrapper">
        <div id="messages">
      <% messages.forEach(function(message) { %>
          <div class="message" data-type="<%= message.Typemess %>">
            <div class="user">
              <strong class="userName"><%= message.Fromuser %></strong>
              <span class="userDate" data-when="<%= message.Datesend %>"></span>
            </div>
            <%if (message.Typemess == 1) { %>
              <p class="userText"><%= message.Content %></p>
            <% } else if (message.Typemess == 2) { %>
              <div class="userImgWrapper">
               <img class="userImg" src="/static?id=<%= message.Content %>">
              </div>
            <% } %>
          </div>
      <% }); %>
          <div id="waiting">
            <button class="spinning botonBonito">
              <svg class="icono" width="22" height="22" class="spinning" viewBox="0 0 32 32">
                <path d="M13 29c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM0 16c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM26 16c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM3.808 6.808c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM22.192 25.192c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM3.808 25.192c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM22.192 6.808c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3z"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>
      <form id="newMessage">
        <input class="textBox" autofocus required>
        <button type="submit" class="bRadius50"id="mesBtn">
          <svg class="icono" width="22" height="22" viewBox="0 0 32 32">
            <path d="M17 32c-0.072 0-0.144-0.008-0.217-0.024-0.458-0.102-0.783-0.507-0.783-0.976v-15h-15c-0.469 0-0.875-0.326-0.976-0.783s0.129-0.925 0.553-1.123l30-14c0.381-0.178 0.833-0.098 1.13 0.199s0.377 0.749 0.199 1.13l-14 30c-0.167 0.358-0.524 0.577-0.906 0.577zM5.508 14h11.492c0.552 0 1 0.448 1 1v11.492l10.931-23.423-23.423 10.931z"></path>
          </svg>
        </button>
        <button type="button" class="bRadius50" id="imgBtn">
          <svg width="24" height="24" viewBox="0 0 24 24">
            <path fill="none" d="M0 0h24v24H0V0z"/>
            <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"/>
          </svg>
          <input type="file" accept="image/*">
        </button>
      </form>
    </section>
  </div>
  <template id="tmplMesage">
      <div class="message" data-type="1">
        <div class="user">
          <strong class="userName"></strong>
          <span class="userDate" data-when=""></span>
        </div>
        <p class="userText"></p>
        <div class="userImgWrapper">
            <img class="userImg" src="">
        </div>
        <button class="spinning botonBonito">
          <svg class="icono" width="22" height="22" class="spinning" viewBox="0 0 32 32">
            <path d="M13 29c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM0 16c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM26 16c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM3.808 6.808c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM22.192 25.192c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM3.808 25.192c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM22.192 6.808c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3z"></path>
          </svg>
        </button>
      </div>
    </template>
</body>
</html>
